# =============================================================================
# Real-Time Personalization Engine - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment
# DO NOT commit .env to version control

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_ENV=development
APP_NAME=recommendation-engine
APP_VERSION=1.0.0
APP_HOST=0.0.0.0
APP_PORT=8000
APP_WORKERS=4
APP_DEBUG=false

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=5

# Redis Cluster (for production)
# REDIS_CLUSTER_NODES=redis-0:6379,redis-1:6379,redis-2:6379

# -----------------------------------------------------------------------------
# Feature Store
# -----------------------------------------------------------------------------
FEATURE_STORE_BACKEND=redis
FEATURE_STORE_CACHE_TTL_USER=3600
FEATURE_STORE_CACHE_TTL_ITEM=86400

# Feast (optional)
# FEAST_REPO_PATH=/path/to/feast/repo
# FEAST_ONLINE_STORE=redis

# -----------------------------------------------------------------------------
# Model Serving
# -----------------------------------------------------------------------------
MODEL_DIR=/models
MODEL_VERSION=latest

# Triton Inference Server
TRITON_URL=localhost:8001
TRITON_MODEL_TWO_TOWER=two_tower
TRITON_MODEL_DLRM=dlrm
TRITON_TIMEOUT_MS=50

# -----------------------------------------------------------------------------
# FAISS Index
# -----------------------------------------------------------------------------
FAISS_INDEX_PATH=/models/faiss_index
FAISS_INDEX_TYPE=IVF4096,Flat
FAISS_NPROBE=64
FAISS_USE_GPU=true

# -----------------------------------------------------------------------------
# Retrieval Settings
# -----------------------------------------------------------------------------
RETRIEVAL_NUM_CANDIDATES=1000
RETRIEVAL_CACHE_TTL=300
RETRIEVAL_FALLBACK_POPULAR=true

# -----------------------------------------------------------------------------
# Ranking Settings
# -----------------------------------------------------------------------------
RANKING_BATCH_SIZE=64
RANKING_TOP_K=50
RANKING_DIVERSITY_FACTOR=0.3

# -----------------------------------------------------------------------------
# API Settings
# -----------------------------------------------------------------------------
API_MAX_RECOMMENDATIONS=100
API_DEFAULT_RECOMMENDATIONS=10
API_RATE_LIMIT=1000
API_TIMEOUT_SECONDS=10

# CORS
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Authentication (optional)
# -----------------------------------------------------------------------------
# AUTH_ENABLED=false
# AUTH_JWT_SECRET=your-secret-key-here
# AUTH_JWT_ALGORITHM=HS256
# AUTH_JWT_EXPIRY_HOURS=24

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_PORT=9090

# OpenTelemetry (optional)
# OTEL_ENABLED=false
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=recommendation-engine

# -----------------------------------------------------------------------------
# MLOps
# -----------------------------------------------------------------------------
# MLflow
MLFLOW_TRACKING_URI=http://localhost:5000
MLFLOW_EXPERIMENT_NAME=recommendation-engine

# Weights & Biases (optional)
# WANDB_API_KEY=your-wandb-key
# WANDB_PROJECT=recommendation-engine

# -----------------------------------------------------------------------------
# Database (for feedback/events)
# -----------------------------------------------------------------------------
# DATABASE_URL=postgresql://user:password@localhost:5432/recommendations
# DATABASE_POOL_SIZE=10

# -----------------------------------------------------------------------------
# Message Queue (for async processing)
# -----------------------------------------------------------------------------
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_CONSUMER_GROUP=recommendation-engine
# KAFKA_EVENTS_TOPIC=user-events

# -----------------------------------------------------------------------------
# Cloud Storage (for model artifacts)
# -----------------------------------------------------------------------------
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-west-2
# S3_MODEL_BUCKET=your-model-bucket

# GCS (alternative)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
# GCS_MODEL_BUCKET=your-model-bucket

# -----------------------------------------------------------------------------
# A/B Testing
# -----------------------------------------------------------------------------
AB_TESTING_ENABLED=true
AB_TESTING_DEFAULT_VARIANT=control
AB_TESTING_SALT=your-random-salt

# -----------------------------------------------------------------------------
# GPU Settings
# -----------------------------------------------------------------------------
CUDA_VISIBLE_DEVICES=0
TF_FORCE_GPU_ALLOW_GROWTH=true

# -----------------------------------------------------------------------------
# Development Only
# -----------------------------------------------------------------------------
# DEV_MOCK_MODELS=false
# DEV_SEED_DATA=true
# DEV_PROFILE_REQUESTS=false
